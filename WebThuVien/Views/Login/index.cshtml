
@{
    Layout = null;
}

<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel="stylesheet">

    <link rel="stylesheet" href="Content/fonts/icomoon/style.css">

    <link rel="stylesheet" href="Content/css/owl.carousel.min.css">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="Content/css/bootstrap.min.css">

    <!-- Style -->
    <link rel="stylesheet" href="Content/css/style.css">

    <title>Website Menu #4</title>
</head>
<body>


    <div class="site-mobile-menu site-navbar-target">
        <div class="site-mobile-menu-header">
            <div class="site-mobile-menu-close mt-3">
                <span class="icon-close2 js-menu-toggle"></span>
            </div>
        </div>
        <div class="site-mobile-menu-body"></div>
    </div>




    <header class="site-navbar js-sticky-header site-navbar-target" role="banner">

        <div class="container">
            <div class="row align-items-center position-relative">


                <div class="site-logo">
                    <a href="~/Saches/Index" class="text-black"><span class="text-primary">DDH LIBRARY</a>
                </div>

                <div class="col-12">
                    <nav class="site-navigation text-right ml-auto " role="navigation">

                        <ul class="site-menu main-menu js-clone-nav ml-auto d-none d-lg-block">
                            <li><a href="~/Saches/Index" class="nav-link">Home</a></li>
                            <li><a href="#services-section" class="nav-link">Services</a></li>


                            <li class="has-children">
                                <a href="#about-section" class="nav-link">About Us</a>
                                <ul class="dropdown arrow-top">
                                    <li><a href="#team-section" class="nav-link">Team</a></li>
                                    <li><a href="#pricing-section" class="nav-link">Pricing</a></li>
                                    <li><a href="#faq-section" class="nav-link">FAQ</a></li>
                                    <li class="has-children">
                                        <a href="#">More Links</a>
                                        <ul class="dropdown">
                                            <li><a href="#">Menu One</a></li>
                                            <li><a href="#">Menu Two</a></li>
                                            <li><a href="#">Menu Three</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>

                            <li><a href="#why-us-section" class="nav-link">Why Us</a></li>

                            <li><a href="#testimonials-section" class="nav-link">Testimonials</a></li>
                            <li><a href="#blog-section" class="nav-link">Blog</a></li>
                            <li><a href="#contact-section" class="nav-link">Contact</a></li>
                        </ul>
                    </nav>

                </div>

                <div class="toggle-button d-inline-block d-lg-none"><a href="#" class="site-menu-toggle py-5 js-menu-toggle text-black"><span class="icon-menu h3"></span></a></div>

            </div>
        </div>

    </header>
    <div class="container" style="margin-top: 10%;">
        <div class="row justify-content-center">
            <div class="col-md-4 alert alert-info">
                <h3 class="text-danger" style="text-align:center">Đăng nhập</h3>
                <form id="loginForm">
                    <div id="msg">
                        <a style="color:red; text-align:left">Tên người dùng hoặc mật khẩu không đúng!</a>
                    </div>
                    <div class="form-group">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-envelope"></i></span>
                            <input class="form-control" type="text" name="TenDN" id="logUser" placeholder="Tên đăng nhập" />
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
                            <input class="form-control" type="password" name="MatKhau" id="logPass" placeholder="Mật khẩu" />
                        </div>
                    </div>

                    <div class="form-group">
                        <button class="btn btn-info form-control" type="submit" onclick="Login()"><i class="glyphicon glyphicon"></i>Đăng nhập</button>
                    </div>

                    <div class="form-group">
                        <a style="float:left">Quên mật khẩu?</a>
                        <a style="float:right;cursor:pointer" onclick="SignUp()">Đăng ký</a>

                    </div>

                </form>
            </div>
        </div>
    </div>



    <div class="modal fade" id="ShowModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">

                    <h4>Form đăng ký</h4>
                    @*<div id="message1">
                            <div class="alert alert-success">
                                <span class="glyphicon glyphicon-ok">
                                    <strong>Thông báo thành công! Bạn đã đăng ký thành công</strong>
                                </span>
                            </div>
                        </div>
                        <div id="message2">
                            <div class="alert alert-danger">
                                    <span class="glyphicon glyphicon-remove">
                                        <strong>Không được để trống</strong>
                                    </span>
                            </div>
                        </div>*@
                    <a href="#" class="close" data-dismiss="modal">&times;</a>

                </div>
                <div class="modal-body">
                    <form id="Registration">

                        <div class="form-group">
                            <div class="input-group">
                                <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                                <input class="form-control" type="text" name="HoTenSinhVien" id="hoTen" placeholder="Họ tên" />
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="input-group">
                                <span class="input-group-addon"><i class="glyphicon glyphicon-envelope"></i></span>
                                <input class="form-control" type="text" name="TenDN" id="reUser" placeholder="Tên đăng nhập" />
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="input-group">
                                <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
                                <input class="form-control" type="password" name="MatKhau" id="rePass" placeholder="Mật khẩu" />
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="input-group">
                                <span class="input-group-addon"><i class="glyphicon-lock"></i></span>
                                <input class="form-control" type="password" name="confirmPasslog" id="reconPass" placeholder="Nhập lại mật khẩu" />
                            </div>
                        </div>


                    </form>
                    <div class="form-group">
                        <button class="btn btn-info form-control" type="submit" onclick="SaveForm()"><i class="glyphicon glyphicon-registration-mark">Submit</i></button>
                    </div>
                    <div id="message1">
                        <div class="alert alert-success">
                            <span class="glyphicon glyphicon-ok">
                                <strong>Bạn đã đăng ký thành công</strong>
                            </span>
                        </div>
                    </div>
                    <div id="message2">
                        <div class="alert alert-danger">
                            <span class="glyphicon glyphicon-remove">
                                <strong>Không được để trống</strong>
                            </span>
                        </div>
                    </div>
                    <div id="message3">
                        <div class="alert alert-danger">
                            <span class="glyphicon glyphicon-remove">
                                <strong>Mật khẩu nhập lại không giống nhau</strong>
                            </span>
                        </div>
                    </div>
                    <div id="message4">
                        <div class="alert alert-danger">
                            <span class="glyphicon glyphicon-remove">
                                <strong>Tên đăng nhập không được có ký tự đặc biệt</strong>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="Content/js/jquery-3.3.1.min.js"></script>
    <script src="Content/js/popper.min.js"></script>
    <script src="Content/js/bootstrap.min.js"></script>
    <script src="Content/js/jquery.sticky.js"></script>
    <script src="Content/js/main.js"></script>
</body>
</html>

<script>


    function SignUp() {

        $("#ShowModal").modal();
        $("#message1").hide();
        $("#message2").hide();
        $("#message3").hide();
        $("#message4").hide();
    }
    function SaveForm() {

        var name = $("#hoTen").val();
        var userName = $("#reUser").val();
        var rePass = $("#rePass").val();
        var reconPass = $("#reconPass").val();

        if (name == "" || userName == "" || rePass == "") {
            $("#message1").hide();
            $("#message3").hide();
            $("#message4").hide();
            $("#message2").show();
            return false;
        }
        if (rePass != reconPass) {
            $("#message1").hide();
            $("#message2").hide();
            $("#message4").hide();
            $("#message3").show();
            return false;
        }

        function containsSpecialChars(str) {
          const specialChars = /[`!@@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/;
          return specialChars.test(str);
        }

        if (containsSpecialChars(userName)) {
            $("#message4").show();
            $("#message1").hide();
            $("#message2").hide();
            $("#message3").hide();
            return false;
        } else {
        }

        $.ajax({
            type: "POST", // Change this to POST
            data: $("#Registration").serialize(),
            url: "/Register/SaveData",
            success: function (result) {
                $("#message4").hide();
                $("#message1").show();
                $("#message2").hide();
                $("#message3").hide();
                $("#Registration")[0].reset();
            }
        });

    }
    $("#msg").hide();
    var Login = function () {

        @*$.ajax({
            type: "post",
            url: "/Register/CheckValidUser",
            data: $("#loginForm").serialize(),
            success: function (result) {
                if (result == "Fail") {
                    $("#loginForm")[0].reset();
                    $("#msg").show();
                }
                else {
                    window.location.href = "/Home/Index"
                    $("#msg").hide();
                }
            }

        });*@
        $.ajax({
            type: "POST", // Change this to POST
            data: $("#loginForm").serialize(),
            url: "/Login/CheckValidUser",
            success: function (result) {
                if (result == "Fail") {
                    $("#loginForm")[0].reset();
                    $("#msg").show();
                } else {
                    window.location.href = "~/Home/Index";
                    $("#msg").hide();
                }
            }
        });
    }

</script>